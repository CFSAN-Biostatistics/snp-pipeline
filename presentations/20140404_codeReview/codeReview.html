<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>SNP Pipeline Code Review</title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="file:///home/hugh.rand/anaconda/lib/python2.7/site-packages/landslide/themes/default/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="file:///home/hugh.rand/anaconda/lib/python2.7/site-packages/landslide/themes/default/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="file:///home/hugh.rand/anaconda/lib/python2.7/site-packages/landslide/themes/default/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>SNP Pipeline Code Review</h1></header>
            
            
            <section><ul>
<li>Hugh Rand, Yan Luo, Jamie Pettengill, Errol Strain</li>
<li>2014-04-04</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              1/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Thanks To</h1></header>
            
            
            <section><ul>
<li>Yan - graciously letting me rearrange her code.</li>
<li>Jamie - for help testing and troubleshooting.</li>
<li>John I. - for an idea about how do one thing.</li>
<li>Errol - for prodding me along.</li>
<li>Fish - for prodding on code reviews.</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              2/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Current Concerns</h1></header>
            
            
            <section><ul>
<li>Have I got all the right pieces?</li>
<li>Am I going in the right direction?</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              3/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>How it gets used</h1></header>
            
            
            <section><pre><code>1. Align sequences to reference
        bowtie2-align -p 11 -q -x /Users/james.pettengill/Downloads/bowtie2-2.2.0/example/reference/lambda_virus -1 reads4_1.fq -2 reads4_2.fq &gt; reads4.sam

2. Convert to bam file with only mapped positions
        samtools view -bS -F 4 -o /Users/james.pettengill/Downloads/bowtie2-2.2.0/example/reads/reads1_F4.bam reads1.sam

3. Convert to a sorted bam 
        samtools sort  reads4_F4.bam reads4_F4.sorted.bam

4. Get a bcf file from the pileup and bam file
        samtools mpileup -uf /Users/james.pettengill/Downloads/bowtie2-2.2.0/example/reference/lambda_virus.fa reads1_F4.sorted.bam.bam | bcftools view -bvcg - &gt; reads1_F4.bcf

5. Convert bcf to vcf
        bcftools view reads1_F4.bcf | vcfutils.pl varFilter -D1000 &gt; var1_F4.flt.vcf

6. Run samtools pileup in parallel and combine alignment and pileup to generate snp matrix
        ./snppipeline.py -n 10 -d ~/projects/snppipeline/test/testLambdaVirus/ -f path.txt -r lambda_virus.fa -l snplist.txt -a snpma.fasta -i True
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              4/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Command line use</h1></header>
            
            
            <section><p>!python
if <strong>name</strong> == '<strong>main</strong>':</p>
<pre><code>parser = argparse.ArgumentParser(description='Run SNP pipeline.')
parser.add_argument('-n', '--n-processes',      dest='maxThread',        type=int,  default=4,                 help='Max number of concurrent jobs.')
parser.add_argument('-d', '--mainPath',         dest='mainPath',         type=str,  default='', help='Path for all files')
parser.add_argument('-r', '--Reference',        dest='Reference',        type=str,  default='reference.fasta', help='reference for mapping')
parser.add_argument('-f', '--pathFileName',     dest='pathFileName',     type=str,  default='path.txt',        help='Path file name')
parser.add_argument('-l', '--snplistFileName',  dest='snplistFileName',  type=str,  default='snplist.txt',     help='Snplist file name')
parser.add_argument('-a', '--snpmaFileName',    dest='snpmaFileName',    type=str,  default='snpma.fa',        help='fasta file name')
parser.add_argument('-b', '--bamFileName',      dest='bamFileName',      type=str,  default='reads.bam',       help='bam file name')
parser.add_argument('-p', '--pileupFileName',   dest='pileupFileName',   type=str,  default='reads.pileup',    help='pileup file name')
parser.add_argument('-v', '--verbose',          dest='verbose',          type=int,  default=1,                 help='Verbose flag (0=no info, 5=lots')
parser.add_argument('-i', '--includeReference', dest='includeReference', type=bool, default=False,             help='Write reference sequence bases at SNP positions in fasta format.')
parser.add_argument('-o', '--useOldPileups',    dest='useOldPileups',    type=bool, default=False,             help='Use available pileup files.')
parser.add_argument(      '--DP',               dest='combinedDepthAcrossSamples',       type=int,   default=10,  help='Combined depth across samples.')
parser.add_argument(      '--AF1',              dest='alleleFrequencyForFirstALTAllele', type=float, default=1.0, help='Allele frequency for first allele.')
parser.add_argument(      '--AR',               dest='arFlagValue',                      type=float, default=1.0, help='AR flag value.')
args_dict = vars(parser.parse_args())

print("Running SNP pipeline with arguments:")
pprint.pprint(args_dict)
run_snp_pipeline(args_dict)
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              5/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Code History and Use</h1></header>
            
            
            <section><h2>History</h2>
<ul>
<li>Errol - 1st version</li>
<li>Yan   - 2nd version</li>
<li>Hugh  - package creation</li>
<li>Hugh  - speed</li>
</ul>
<h2>Use</h2>
<ul>
<li>sequence analysis and publication</li>
<li>outbreak investigation</li>
</ul>
<h2>Context</h2>
<ul>
<li>CDC pipeline (Lee Katz)<ul>
<li>https://github.com/lskatz/lyve-SET</li>
</ul>
</li>
<li>CVM (Yuansha Chen)<ul>
<li>desire for a standard for SNP calling and phylogenetic tree analysis</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              6/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Goals</h1></header>
            
            
            <section><h2>Make it publishable</h2>
<ul>
<li>Jamie's paper</li>
</ul>
<h2>Make it shareable</h2>
<ul>
<li>CDC </li>
<li>CVM</li>
</ul>
<h2>Make it a package</h2>
<ul>
<li>Reuseable code</li>
<li>Easily installed</li>
<li>Locked down (versioning and source code control) </li>
<li>Testable</li>
</ul>
<h2>Get it publicaly vetted</h2>
<ul>
<li>Prepare for challenge of use in regulatory setting</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              7/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Some background</h1></header>
            
            
            <section><ul>
<li>Running with anaconca</li>
<li>Using python 2.7.6</li>
<li>Using PyVCF<ul>
<li>(If you want to get good at writing, then read a fair bit.)</li>
<li>(But, be judicious about what you read.)</li>
<li>reasonably well written.</li>
<li>does something useful for me.<ul>
<li>$python -m easy_install PyVCF</li>
<li>Installing vcf_filter.py script to /home/hugh.rand/anaconda/bin</li>
<li>Installing vcf_melt script to /home/hugh.rand/anaconda/bin</li>
</ul>
</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              8/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>The 'ecosystem' - Part 1</h1></header>
            
            
            <section><ul>
<li>Python instalation - Anaconda</li>
<li>IDE - Spyder</li>
<li>Code standards<ul>
<li>PEP8</li>
<li>Google Code</li>
</ul>
</li>
<li>Testing<ul>
<li>pylint</li>
<li>unittest</li>
<li>doctest</li>
</ul>
</li>
<li>Distribution<ul>
<li>distutils</li>
<li>setuptools</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              9/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>The 'ecosystem' - Part 2</h1></header>
            
            
            <section><ul>
<li>Documentation<ul>
<li>PEP8</li>
<li>sphinx</li>
</ul>
</li>
<li>Source Code Control - git </li>
<li>Presentations<ul>
<li>TBD</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              10/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>What I did - Part 1</h1></header>
            
            
            <section><ul>
<li>Add comments</li>
<li>Broke much of code out as functions</li>
<li>Pythonify names of functions and variables</li>
<li>Create tests</li>
<li>All global variables gone</li>
<li>Break up code into 'main' and utilities</li>
<li>Move main 'script' into function</li>
<li>Update argument passing package (2.6-&gt;2.7)</li>
<li>Organize code as a python package</li>
<li>Move from threads to processes</li>
<li>General cleanup</li>
<li>Add use of PyVCF</li>
<li>Improve pylint score</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              11/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>What I did - Part 2</h1></header>
            
            
            <section><ul>
<li>Add release versioning and all under version control</li>
<li>Add new flags (includeReference, various parameters).</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              12/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>What Remains to do</h1></header>
            
            
            <section><ul>
<li>Add new flags (verbose, useOldPileups).</li>
<li>Trap keyboard interupts so can halt code cleanly.</li>
<li>Turn it into an "Egg"</li>
<li>Get it out on gitHub</li>
<li>Move to SVN</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              13/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Package layout - snppipeline</h1></header>
            
            
            <section><ul>
<li>build, dist, doc, LICENSE.txt, MANIFEST.in</li>
<li>notes, presentations</li>
<li>README.txt</li>
<li>setup.py</li>
<li>snppipeline<ul>
<li>README_developmentNotes</li>
<li>snppipeline.py</li>
<li>utils.py</li>
</ul>
</li>
<li>test<ul>
<li>codeComparisonFiles</li>
<li>testAgonaMOM</li>
<li>testLambdaVirus</li>
<li>test_snppipeline.py</li>
<li>test_utils.py</li>
</ul>
</li>
<li>snppipeline.egg-info</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              14/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Functions</h1></header>
            
            
            <section><p>egrep 'def |\"\"\"' ../../snppipeline/snppipeline.py | sed -e 's/\"\"\"//'</p>
<p>egrep 'def |\"\"\"' ../../snppipeline/utils.py | sed -e 's/\"\"\"//'</p>
<ul>
<li>
<p>def run_snp_pipeline(options_dict):
    Create SNP matrix</p>
</li>
<li>
<p>def pileup_wrapper(args):
    Wraps pileup to use multiple arguments with multiprocessing package.</p>
</li>
<li>def pileup(filePath, options_dict):
    Run samtools to generate pileup.</li>
<li>def get_consensus_base_from_pileup(base, length, data):
    Call the base for each SNP position</li>
<li>def create_consensus_dict(pileup_file_path):
    Create a dict based on the information in a pileup file.</li>
<li>def write_list_of_snps(file_path, snp_list_dict):  <br />
    Write out list of snps for all samples to a single file.</li>
<li>def write_reference_snp_file(reference_file_path, snp_list_file_path,
    Write out the snp fasta file for the reference.fasta using the snp</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              15/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Testing environment</h1></header>
            
            
            <section><ul>
<li>virtual machine<ul>
<li>vmware - vmplayer</li>
<li>ubuntu</li>
</ul>
</li>
<li>install process<ul>
<li>samtools</li>
<li>pyvcf</li>
<li>????</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              16/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Where to put the code?</h1></header>
            
            
            <section><p>svn: https://xserve19.fda.gov/svn/bioin/mapping</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              17/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>pylint</h1></header>
            
            
            <section><h2>2014-04-01:</h2>
<ul>
<li>
<p>pylint snppipeline/utils.py | grep "rated"</p>
<p>No config file found, using default configuration
Your code has been rated at 7.72/10 (previous run: 7.72/10)</p>
</li>
<li>
<p>pylint snppipeline/snppipeline.py | grep "rated"</p>
<p>No config file found, using default configuration
Your code has been rated at 5.68/10 (previous run: 5.68/10)</p>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              18/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Version control log 2014-04-02</h1></header>
            
            
            <section><ul>
<li>1 * bba51bd - (HEAD, master) More work on presentation. (4 seconds ago) <Hugh Rand></li>
<li>2 * 717597d - snppipeline.egg-info added to git tracking. (17 hours ago) <Hugh Rand></li>
<li>3 * 2d84d4c - Clean up imports. (17 hours ago) <Hugh Rand></li>
<li>4 * 440a340 - Presentation edited.  focus on documentation, egg building, and code review prep. (23 hours ago) <Hugh Rand></li>
<li>...</li>
<li>89 * 15d15d0 - (tag: NoErrorOriginalCode) Now know how to run old code with data in test file. (5 weeks ago) <Rand></li>
<li>90 * 6f70b77 - Minor changes to code. Brought in original single-file code for testing. (5 weeks ago) <Rand></li>
<li>91 * a626adc - Working on pulling apart code into package. Added test data from Jamie. (5 weeks ago) <Rand></li>
<li>92 * 63dabb1 - Initial set of code to get started. (6 weeks ago) <Rand></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              19/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Making the code public</h1></header>
            
            
            <section><p>github?</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              20/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>The tests</h1></header>
            
            
            <section><ul>
<li>Packages<ul>
<li>unittest</li>
<li>doctest</li>
</ul>
</li>
<li>Some simple unit tests</li>
<li>Two integration tests<ul>
<li>lambda virus</li>
<li>agona</li>
</ul>
</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              21/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Some Test Output - 1</h1></header>
            
            
            <section><pre><code>./test/test_utils.py -v
...
ok
5 items had no tests:
    utils
    utils.pileup
    utils.pileup_wrapper
    utils.write_list_of_snps
    utils.write_reference_snp_file
2 items passed all tests:
3 tests in utils.create_consensus_dict
9 tests in utils.get_consensus_base_from_pileup
12 tests in 7 items.
12 passed and 0 failed.
Test passed.
ok
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              22/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Some Test Output - 2</h1></header>
            
            
            <section><pre><code>./test/test_snppipeline.py -v
test_snppipeline_agona (__main__.Test)
Run snppipeline with agona 5 samples example. ... [mpileup] 1 samples in 1 input files
...
Match, Mismatch, Errors: 8, 0, 0
...
ok
test_snppipeline_lambda_virus (__main__.Test)
Run snppipeline with synthetic virus example. ... [mpileup] 1 samples in 1 input files
...
Match, Mismatch, Errors: 7, 0, 0
...
ok
</code></pre></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              23/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>BACKUP</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              24/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source:  -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="page_number">
              /28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>References</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              25/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Building Python Eggs</h1></header>
            
            
            <section><ul>
<li>Packages<ul>
<li>distutils</li>
<li>setuptools</li>
</ul>
</li>
<li>Code<ul>
<li>setup.py</li>
</ul>
</li>
</ul>
<h1>Python Eggs</h1>
<p>A "Python egg" is a logical structure embodying the release of a specific
version of a Python project, comprising its code, resources, and metadata.
There are multiple formats that can be used to physically encode a Python egg,
and others can be developed. However, a key principle of Python eggs is that
they should be discoverable and importable. That is, it should be possible for
a Python application to easily and efficiently find out what eggs are present
on a system, and to ensure that the desired eggs' contents are importable.</p>
<p>The .egg format is well-suited to distribution and the easy uninstallation or
upgrades of code, since the project is essentially self-contained within a
single directory or file, unmingled with any other projects' code or resources. 
It also makes it possible to have multiple versions of a project simultaneously
installed, such that individual programs can select the versions they wish to
use.</p>
<p>(http://stackoverflow.com/questions/2051192/what-is-a-python-egg)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              26/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>CDC Pipeline</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              27/28
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: codeReview.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Function call graph</h1></header>
            
            
            <section><p>pycallgraph</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="codeReview.md">codeReview.md</a>
            </aside>
            
            <aside class="page_number">
              28/28
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">SNP Pipeline Code Review</a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Thanks To</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">Current Concerns</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">How it gets used</a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">Command line use</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">Code History and Use</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">Goals</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">Some background</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">The 'ecosystem' - Part 1</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">The 'ecosystem' - Part 2</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">What I did - Part 1</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">What I did - Part 2</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">What Remains to do</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">Package layout - snppipeline</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">Functions</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">Testing environment</a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">Where to put the code?</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">pylint</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">Version control log 2014-04-02</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">Making the code public</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">The tests</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">Some Test Output - 1</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">Some Test Output - 2</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">BACKUP</a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">References</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">Building Python Eggs</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">CDC Pipeline</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">Function call graph</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>
